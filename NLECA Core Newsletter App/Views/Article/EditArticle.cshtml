@model NLECA_Core_Newsletter_App.Models.Newsletter.EditArticleModel
@{
    ViewData["Title"] = "EditArticle";
}

@using NLECA_Core_Newsletter_App.Data;
@{
    string intValue = "IntValue";
    string textValue = "Text";
}

<link href="~/css/EditArticle.css" rel="stylesheet" />

@section HeaderScripts {
<script src="https://cdn.ckeditor.com/4.14.0/standard/ckeditor.js"></script>
}

<h1>EditArticle</h1>

<h2>Added: @Model.Article.DateAdded by UserId: @Model.Article.AddedBy</h2>

<input hidden id="ModelArticleId" value="@Model.Article.ArticleId" />

<form asp-controller="Article" asp-action="UpdateArticle" data-ajax="true" data-ajax-method="POST">

    <input hidden asp-for="Article.ArticleId" />
    <input hidden asp-for="Article.NewsletterId" />
    <input hidden asp-for="Article.ArticleSequence" />
    <input hidden asp-for="Article.ImageFileLocation" id="articleImageFileLocation" />
    <input hidden asp-for="Article.AddedBy" />
    <input hidden asp-for="Article.DateAdded" />


    <label for="articleTypeSelector">Article Type: </label>
    <select id="ArticleTypeDropdown" asp-for="Article.ArticleType" asp-items="@(new SelectList(Model.ArticleTypes, intValue, textValue))">
    </select>

    <div>
        <label for="articleTableOfContentsText">Table of contents Text: </label>
        <input asp-for="Article.ArticleTableOfContentsText" />
    </div>
    <div>
        <label for="articleTitle">Article Title: </label>
        <input asp-for="Article.ArticleTitle" />
    </div>


    <div class="articleContent">
        <div class="topArticleImage">
            <div class="dragAndDropImageArea">
                @if (string.IsNullOrEmpty(Model.Article.ImageFileLocation))
                {
                    <img class="dragAndDropImage" src="../../Images/ArticleImages/draganddropimage.png" />
                }
                else
                {
                    <img class="dragAndDropImage" src="@Model.Article.ImageFileLocation" />
                }
            </div>
        </div>
        <div class="leftArticleImage">
            <div class="dragAndDropImageArea">
                @if (string.IsNullOrEmpty(Model.Article.ImageFileLocation))
                {
                    <img class="dragAndDropImage" src="../../Images/ArticleImages/draganddropimage.png" />
                }
                else
                {
                    <img class="dragAndDropImage" src="@Model.Article.ImageFileLocation" />
                }
            </div>
        </div>
        <div class="rightArticleImage">
            <div class="dragAndDropImageArea">
                @if (string.IsNullOrEmpty(Model.Article.ImageFileLocation))
                {
                    <img class="dragAndDropImage" src="../../Images/ArticleImages/draganddropimage.png" />
                }
                else
                {
                    <img class="dragAndDropImage" src="@Model.Article.ImageFileLocation" />
                }
            </div>
        </div>

        <textarea id="ArticleText" asp-for="Article.ArticleText"></textarea>

        <div class="bottomArticleImage">
            <div class="dragAndDropImageArea">
                @if (string.IsNullOrEmpty(Model.Article.ImageFileLocation))
                {
                    <img class="dragAndDropImage" src="../../Images/ArticleImages/draganddropimage.png" />
                }
                else
                {
                    <img class="dragAndDropImage" src="@Model.Article.ImageFileLocation" />
                }
            </div>
        </div>
    </div>

    <button type="submit">Save Changes</button>
    <button id="ArticleEditCancelButton" type="button">Cancel</button>
    <button id="ArticleDeleteButton" type="button">DELETE ARTICLE</button>
</form>

<form id="UploadArticleImageForm" action="/ArticleImage/UploadArticleImage" method="post" enctype="multipart/form-data">
    <input type="hidden" name="articleId" value="@Model.Article.ArticleId" />
    <input type="hidden" name="articleImageType" value="@Model.Article.ArticleType" />
    <input type="file" name="imageFile" id="ImageFileInput" accept="image/*" />
</form>

<form id="DeleteArticleForm" action="/Article/RemoveArticle" method="post">
    <input type="hidden" name="newsletterId" value="@Model.Article.NewsletterId" />
    <input type="hidden" name="articleId" value="@Model.Article.ArticleId" />
</form>


@section Scripts {
<script src="~/js/Article/EditArticle.js"></script>
}